{"version":3,"sources":["webpack:///./js/input-search-countries.js","webpack:///./js/fetchCountries.js"],"names":["defaults","styling","icons","defaultModules","set","PNotifyMobile","inputRef","document","querySelector","searchResultsRef","addEventListener","debounce","event","innerHTML","searchQuery","target","value","fetch","then","result","json","length","alert","text","type","delay","insertAdjacentHTML","reduce","acc","item","name","createListCountriesMarkup","markupLanguage","languages","capital","population","flag","createCountryPropertiesMarkup","catch","console","log"],"mappings":"4NAMAA,WAASC,QAAU,cACnBD,WAASE,MAAQ,cAEjBC,iBAAeC,IAAIC,EAAe,IAElC,IAAMC,EAAWC,SAASC,cAAc,WAClCC,EAAmBF,SAASC,cAAc,mBAEhDF,EAASI,iBAAiB,QAASC,KACnC,SAAsBC,GACpBH,EAAiBI,UAAY,IChBQC,EDiBXF,EAAMG,OAAOC,MChBhCC,MAAM,yCAC8BH,GACzCI,MAAK,SAAAC,GAAM,OAAIA,EAAOC,WDgBrBF,MAAK,SAAAC,GACAA,EAAOE,OAAS,IAClBC,gBAAM,CACJC,KAAM,iFACNC,KAAM,QACNC,MAAO,MAGPN,EAAOE,QAAU,GAAKF,EAAOE,QAAU,IACzCZ,EAAiBiB,mBACf,YA4BV,SAAmCP,GAQjC,MANE,4BACAA,EAAOQ,QAAO,SAACC,EAAKC,GAElB,OADAD,GAAO,OAAOC,EAAKC,KAAhB,UAEF,IACH,QAlCMC,CAA0BZ,IAGR,IAAlBA,EAAOE,QACTZ,EAAiBiB,mBACf,YAQV,SAAuCP,GACrC,IAAMa,EAAiBb,EAAO,GAAGc,UAAUN,QAAO,SAACC,EAAKC,GAEtD,OADAD,GAAO,OAAOC,EAAKC,KAAhB,UAEF,IAOH,MANsB,4BAA4BX,EAAO,GAAGW,KAAzC,+HAEqCX,EAAO,GAAGe,QAF/C,oEAGwCf,EAAO,GAAGgB,WAHlD,+DAImCH,EAJnC,gDAKYb,EAAO,GAAGiB,KALtB,4BAZXC,CAA8BlB,OAInCmB,MAAMC,QAAQC,KCxCJ,IAAwB1B,IDcmB,M","file":"main.1bdde115ef43b1d5fca5.js","sourcesContent":["import debounce from 'lodash.debounce';\nimport { alert, defaultModules } from '@pnotify/core/dist/PNotify.js';\nimport * as PNotifyMobile from '@pnotify/mobile/dist/PNotifyMobile.js';\nimport { defaults } from '@pnotify/core';\nimport '@pnotify/core/dist/BrightTheme.css';\nimport fetchCountries from '/js/fetchCountries.js';\ndefaults.styling = 'brighttheme';\ndefaults.icons = 'brighttheme';\n\ndefaultModules.set(PNotifyMobile, {});\n\nconst inputRef = document.querySelector('.search');\nconst searchResultsRef = document.querySelector('.search-results');\n\ninputRef.addEventListener('input', debounce(inputHandler, 500));\nfunction inputHandler(event) {\n  searchResultsRef.innerHTML = '';\n  const countrySearchName = event.target.value;\n  fetchCountries(countrySearchName)\n    .then(result => {\n      if (result.length > 10) {\n        alert({\n          text: 'Найдено слишком много совпадений. Пожалуйста, введите более конкретный запрос!',\n          type: 'error',\n          delay: 3000,\n        });\n      }\n      if (result.length >= 2 && result.length <= 10) {\n        searchResultsRef.insertAdjacentHTML(\n          'beforeend',\n          createListCountriesMarkup(result),\n        );\n      }\n      if (result.length === 1) {\n        searchResultsRef.insertAdjacentHTML(\n          'beforeend',\n          createCountryPropertiesMarkup(result),\n        );\n      }\n    })\n    .catch(console.log);\n}\n\nfunction createCountryPropertiesMarkup(result) {\n  const markupLanguage = result[0].languages.reduce((acc, item) => {\n    acc += `<li>${item.name}</li>`;\n    return acc;\n  }, '');\n  const markupCountry = `<h2 class='country-name'>${result[0].name}</h2>\n      <div class='wrapper'><div class='country-properties'>\n      <p><span class='country-property'>Capital: </span>${result[0].capital}</p>\n      <p><span class='country-property'>Population: </span>${result[0].population}</p>\n      <h3 class='country-property'>Languages:</h3><ul>${markupLanguage}</ul></div>\n      <img height='300px' src=\"${result[0].flag}\" alt=\"flag\"></img></div>`;\n  return markupCountry;\n}\n\nfunction createListCountriesMarkup(result) {\n  const markup =\n    '<ul class=\"country-list\">' +\n    result.reduce((acc, item) => {\n      acc += `<li>${item.name}</li>`;\n      return acc;\n    }, '') +\n    '</ul>';\n  return markup;\n}\n\n","export default function fetchCountries(searchQuery) {\n  return fetch(\n    `https://restcountries.eu/rest/v2/name/${searchQuery}`,\n  ).then(result => result.json());\n}\n"],"sourceRoot":""}